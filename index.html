<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Hive Report Card - Readability, Wordcount and more by @holoz0r</title>

<script src="https://cdn.jsdelivr.net/npm/@hiveio/hive-js/dist/hive.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.2.0"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@1.0.1/dist/chartjs-adapter-moment.min.js"></script>

<link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="top">
      <h1>Hive Report Card</h1>
      <p><a href="https://www.peakd.com/@holoz0r" target="_blank">@holoz0r</a> created this tool to analyse the complexity of a hive user's content. It also shows how their writing style or length may change over time.</p><br>
      <p>The readability score is calculated using the <a href="https://en.wikipedia.org/wiki/Flesch%E2%80%93Kincaid_readability_tests" target="_blank">Flesch-Kincaid</a> methodology.</p><br>
      <p>This tool is created as a replacement to monthly reporting which showed similar data. It polls the HIVE API live, so no need to publish something to the chain each month, just come back to the tool and check.</p><br/></br>
      <h3><a href="https://vote.hive.uno/@holoz0r" target="_blank">If you like this, Please Support @holoz0r's witness</a></h3>

    </div><br>
<hr>
    <div class="controls" style="margin-top:12px;">
      <div>
      <br>
        <label for="username">Enter a HIVE Account Name:</label>
        <input id="username" type="text" value="holoz0r" />
<br>
<br>
        <button id="btnAll" class="primary" onclick="startFetch('all')">Fetch All Posts</button>
        <button id="btn100" onclick="startFetch('100')">Fetch Last 100</button>
            <div id="statusBar"></div>
      <br><br>
      <div id="searchMessage" class="small hidden">To perform another search, reload the page</div>
    </div>
      </div>
<hr>
  <br>
      </div>
    <div class="filters" id="filters">
      <button data-range="7d" onclick="applyDateFilter('7d', this)">Last 7 Days</button>
      <button data-range="30d" onclick="applyDateFilter('30d', this)">Last 30 Days</button>
      <button data-range="ytd" onclick="applyDateFilter('ytd', this)">Year to Date</button>
      <button data-range="all" class="active" onclick="applyDateFilter('all', this)">All Time</button>
    </div>

    <div id="resultsArea" class="hidden">
      <div class="card-grid" id="cardGrid"></div>
<div id="breaksStreaksTable" class="table-wrap" style="margin:12px 0;"></div>
<div id="periodAnalysisTable" class="table-wrap" style="margin:12px 0;"></div>
      <div class="charts">
      <div class="chart-card chart-full">
  <h3>Words and Images Per Post</h3>
  <div style="display: flex; gap: 8px; justify-content: center; margin-bottom: 12px;">
    <button class="aggregation-btn active" data-unit="day" onclick="changeAggregation('day', this)">Daily</button>
    <button class="aggregation-btn" data-unit="week" onclick="changeAggregation('week', this)">Weekly</button>
    <button class="aggregation-btn" data-unit="month" onclick="changeAggregation('month', this)">Monthly</button>
    <button class="aggregation-btn" data-unit="year" onclick="changeAggregation('year', this)">Yearly</button>
  </div>
  <div class="canvas-wrap"><canvas id="chartPerPost"></canvas></div>
  <div class="center" style="margin-top: 12px; gap: 8px;">
    <button onclick="resetZoom('chartPerPost')">Reset Zoom</button>
    <button onclick="exportChartByCanvasId('chartPerPost')">Export to PNG</button>
  </div>
</div>

        <div class="chart-card">
          <h3>Posts by Day of Week</h3>
          <div id="heatmap" class="heatmap"></div>
        </div>

        <div class="chart-card">
          <h3>Posts by Month of Year</h3>
          <div id="monthmap" class="heatmap"></div>
        </div>

        <div class="chart-card">
          <h3>Posts by Year</h3>
          <div id="yearmap" class="heatmap"></div>
        </div>

        <div class="chart-card">
          <h3>Posts by Hour of Day (UTC)</h3>
          <div id="hourmap" class="heatmap"></div>
        </div>

<div class="chart-card chart-full">
  <h3>Words Published Over Time</h3>
  <div style="display: flex; gap: 8px; justify-content: center; margin-bottom: 12px;">
    <button class="aggregation-btn active" data-unit="day" onclick="changeCumulativeAggregation('day', this)">Daily</button>
    <button class="aggregation-btn" data-unit="week" onclick="changeCumulativeAggregation('week', this)">Weekly</button>
    <button class="aggregation-btn" data-unit="month" onclick="changeCumulativeAggregation('month', this)">Monthly</button>
    <button class="aggregation-btn" data-unit="year" onclick="changeCumulativeAggregation('year', this)">Yearly</button>
  </div>
  <div class="canvas-wrap"><canvas id="chartCumulative"></canvas></div>
  <div class="center" style="margin-top: 12px; gap: 8px;">
    <button onclick="resetZoom('chartCumulative')">Reset Zoom</button>
    <button onclick="exportChartByCanvasId('chartCumulative')">Export to PNG</button>
  </div>
</div>
<div class="chart-card chart-full">
  <h3>Readability Over Time — click a data point to open the post</h3>
  <div style="display: flex; gap: 8px; justify-content: center; margin-bottom: 12px;">
    <button class="aggregation-btn active" data-unit="day" onclick="changeReadabilityAggregation('day', this)">Daily</button>
    <button class="aggregation-btn" data-unit="week" onclick="changeReadabilityAggregation('week', this)">Weekly</button>
    <button class="aggregation-btn" data-unit="month" onclick="changeReadabilityAggregation('month', this)">Monthly</button>
    <button class="aggregation-btn" data-unit="year" onclick="changeReadabilityAggregation('year', this)">Yearly</button>
  </div>
  <div class="canvas-wrap"><canvas id="chartReadability"></canvas></div>
  <div class="center" style="margin-top: 12px; gap: 8px;">
    <button onclick="resetZoom('chartReadability')">Reset Zoom</button>
    <button onclick="exportChartByCanvasId('chartReadability')">Export to PNG</button>
  </div>
</div>
        <div class="chart-card">
          <h3>Readability Distribution</h3>
          <div class="pie-block">
            <canvas id="pieReadability" width="360" height="220"></canvas>
            <div id="readabilityTable" class="table-wrap"></div>
          </div>
        </div>
<div class="chart-card">
  <h3>Engagement by Readability Level</h3>
  <div class="canvas-wrap"><canvas id="chartEngagementReadability"></canvas></div>
  <div class="center"><button onclick="exportChartPNG(chartEngagementReadability)">Export Chart to PNG</button></div>
</div>
        <div class="chart-card">
          <h3>Word Count Distribution</h3>
          <div class="pie-block">
            <canvas id="pieWordDist" width="360" height="220"></canvas>
            <div id="wordDistTable" class="table-wrap"></div>
          </div>
        </div>

<div class="chart-card">
  <h3>Engagement by Word Count</h3>
  <div class="canvas-wrap"><canvas id="chartEngagementWordCount"></canvas></div>
  <div class="center"><button onclick="exportChartPNG(chartEngagementWordCount)">Export Chart to PNG</button></div>
</div>

<div class="chart-card">
  <h3>Content Type Distribution</h3>
  <div class="pie-block">
    <canvas id="pieContentType" width="360" height="220"></canvas>
    <div id="pieContentTypeTable" class="table-wrap"></div>
  </div></div>

<div class="chart-card">
  <h3>Engagement by Content Type</h3>
  <div class="canvas-wrap"><canvas id="chartEngagementContentType"></canvas></div>
  <div class="center"><button onclick="exportChartPNG(chartEngagementContentType)">Export Chart to PNG</button></div>
</div>
      </div>

      <div class="export-row">
        <div class="post-filters" class="hidden">
          <label style="font-weight: 600; color: #cbd5e1; margin-right: 8px;">Filter by Level:</label>
          <button class="filter-level active" data-level="all" onclick="filterPostsByLevel('all', this)">All</button>
          <button class="filter-level" data-level="Elementary" onclick="filterPostsByLevel('Elementary', this)">Elementary</button>
          <button class="filter-level" data-level="Middle School" onclick="filterPostsByLevel('Middle School', this)">Middle School</button>
          <button class="filter-level" data-level="High School" onclick="filterPostsByLevel('High School', this)">High School</button>
          <button class="filter-level" data-level="College" onclick="filterPostsByLevel('College', this)">College</button>
          <button class="filter-level" data-level="University" onclick="filterPostsByLevel('University', this)">University</button>
          <button class="filter-level" data-level="Post-Graduate" onclick="filterPostsByLevel('Post-Graduate', this)">Post-Graduate</button>
          <button class="filter-level" data-level="Professional" onclick="filterPostsByLevel('Professional', this)">Professional</button>
        </div>
        <div id="exportBtns" class="hidden">
          <button onclick="exportCSV()">Export CSV</button>
          <button onclick="exportJSON()">Export JSON</button>
        </div>
      </div>

      <div id="posts" class="posts">
        <h3>Posts (newest → oldest)</h3>
        <div id="postsList"></div>
      </div>
    </div>
  </div>
<script type="module" src="main.js"></script>
</body>
</html>